[debug] [2019-04-17T08:46:39.280Z] ----------------------------------------------------------------------
[debug] [2019-04-17T08:46:39.281Z] Command:       /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/node /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/firebase deploy
[debug] [2019-04-17T08:46:39.282Z] CLI Version:   6.6.0
[debug] [2019-04-17T08:46:39.282Z] Platform:      linux
[debug] [2019-04-17T08:46:39.282Z] Node Version:  v10.14.2
[debug] [2019-04-17T08:46:39.282Z] Time:          Wed Apr 17 2019 16:46:39 GMT+0800 (Hong Kong Standard Time)
[debug] [2019-04-17T08:46:39.282Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-04-17T08:46:39.287Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-04-17T08:46:39.287Z] > authorizing via signed-in user
[debug] [2019-04-17T08:46:39.287Z] [iam] checking project explearning-admin for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2019-04-17T08:46:39.288Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin:testIamPermissions  

[debug] [2019-04-17T08:46:40.329Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:46:40.335Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/explearning-admin  
 
[debug] [2019-04-17T08:46:40.938Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'explearning-admin'...
[info] 
[info] i  deploying storage, firestore, functions, hosting
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2019-04-17T08:46:49.660Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/explearning-admin  
 
[debug] [2019-04-17T08:46:51.032Z] <<< HTTP RESPONSE 200
[info] i  storage: checking storage.rules for compilation errors...
[debug] [2019-04-17T08:46:51.039Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/explearning-admin:test  

[debug] [2019-04-17T08:46:52.246Z] <<< HTTP RESPONSE 200
[info] ✔  storage: rules file storage.rules compiled successfully
[info] i  firestore: checking firestore.rules for compilation errors...
[info] i  firestore: reading indexes from firestore.indexes.json...
[debug] [2019-04-17T08:46:52.253Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/explearning-admin:test  

[debug] [2019-04-17T08:46:53.420Z] <<< HTTP RESPONSE 200
[info] ✔  firestore: rules file firestore.rules compiled successfully
[debug] [2019-04-17T08:46:53.424Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^2.4.3",
    "@types/fs-extra": "^5.0.5",
    "@types/sharp": "^0.22.1",
    "firebase-admin": "~7.0.0",
    "firebase-functions": "^2.2.0",
    "fs-extra": "^7.0.1",
    "moment": "^2.24.0",
    "sharp": "^0.22.0"
  },
  "devDependencies": {
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-04-17T08:46:53.425Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-17T08:46:53.427Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-17T08:46:55.191Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:46:55.208Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2019-04-17T08:46:55.210Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin  
 
[debug] [2019-04-17T08:46:56.242Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:46:56.243Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/4522010229:getServerAppConfig  
 
[debug] [2019-04-17T08:46:56.610Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:46:56.613Z] >>> HTTP REQUEST POST https://firebasehosting.googleapis.com/v1beta1/sites/explearning-admin/versions  

[debug] [2019-04-17T08:46:58.374Z] <<< HTTP RESPONSE 200
[info] i  storage: uploading rules storage.rules...
[debug] [2019-04-17T08:46:58.378Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/explearning-admin/rulesets  

[debug] [2019-04-17T08:46:59.825Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:46:59.826Z] [rules] created ruleset projects/explearning-admin/rulesets/8b345725-c93b-4b5d-8be4-0763d8774e0c
[info] i  firestore: uploading rules firestore.rules...
[debug] [2019-04-17T08:46:59.831Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/explearning-admin/rulesets  

[debug] [2019-04-17T08:46:59.832Z] >>> HTTP REQUEST GET https://firestore.googleapis.com/v1beta2/projects/explearning-admin/databases/(default)/collectionGroups/-/indexes  
 
[debug] [2019-04-17T08:47:00.473Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:00.475Z] >>> HTTP REQUEST GET https://firestore.googleapis.com/v1beta2/projects/explearning-admin/databases/(default)/collectionGroups/-/fields?filter=indexConfig.usesAncestorConfig=false  
 
[debug] [2019-04-17T08:47:01.032Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:01.033Z] [rules] created ruleset projects/explearning-admin/rulesets/78c61989-24dc-48f5-ab22-cb8112236bde
[debug] [2019-04-17T08:47:01.088Z] <<< HTTP RESPONSE 200
[info] ✔  firestore: deployed indexes in firestore.indexes.json successfully
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-04-17T08:47:01.095Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/explearning-admin/configs  
 
[debug] [2019-04-17T08:47:01.425Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (68.92 KB) for uploading
[debug] [2019-04-17T08:47:01.932Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-04-17T08:47:02.341Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:02.343Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-9c81b009-943c-4a8b-8172-4bf2527bada4/b9aaa286-b99a-4601-9d29-e66fc70f5744.zip?GoogleAccessId=service-4522010229@gcf-admin-robot.iam.gserviceaccount.com&Expires=1555492622&Signature=TjPgMid4iNprms5ZwbHhQqz%2BKTdaKdNfjcexCMQSoHeBcPuErZyHAy8Jc1YMnnzov7HX9DxJb8tDB50beSsL0XfZVQs1JGAPL5RMfUR9lstyYP5EvsY0VyzSpCRHbCY%2FFNeM%2FeqQn7XrrYgiK1YafVwByKqcmHp7YdVTDxRfsE0FmQzjDbuZCkokszBV0L6%2Bh4qBPlUXXHb89ysyIrMhosh6NViYVweGVJob1VskvyYntCVhJ44GIt5z2f%2FxIp%2BPcERIDJNRWR6O%2FS16%2FpFxTEbaJNjXInBqAdg4XFUOS3RdoGd6%2F1dEn0jskoxvTM7FKUBWVOujo16mHn3Xui6YQA%3D%3D  

[debug] [2019-04-17T08:47:02.785Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[info] i  hosting[explearning-admin]: beginning deploy...
[info] i  hosting[explearning-admin]: found 22 files in dist/admin
[debug] [2019-04-17T08:47:02.827Z] [hosting] hash cache [ZGlzdC9hZG1pbg] load error: lines is not defined
[debug] [2019-04-17T08:47:02.986Z] [hosting] hash cache [ZGlzdC9hZG1pbg] stored for 22 files
[debug] [2019-04-17T08:47:02.986Z] [hosting][hash queue][FINAL]
[debug] [2019-04-17T08:47:02.986Z] >>> HTTP REQUEST POST https://firebasehosting.googleapis.com/v1beta1/sites/explearning-admin/versions/991d00c8bbc67296:populateFiles  
 <request body omitted>
[debug] [2019-04-17T08:47:05.011Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:05.022Z] [hosting][populate queue][FINAL]
[debug] [2019-04-17T08:47:05.022Z] [hosting] uploads queued: 4
[debug] [2019-04-17T08:47:08.339Z] [hosting][upload queue][FINAL]
[info] ✔  hosting[explearning-admin]: file upload complete
[debug] [2019-04-17T08:47:08.340Z] [hosting] deploy completed after 5552ms
[debug] [2019-04-17T08:47:08.395Z] [rules] releasing firebase.storage/explearning-admin.appspot.com with ruleset projects/explearning-admin/rulesets/8b345725-c93b-4b5d-8be4-0763d8774e0c
[debug] [2019-04-17T08:47:08.396Z] >>> HTTP REQUEST PATCH https://firebaserules.googleapis.com/v1/projects/explearning-admin/releases/firebase.storage/explearning-admin.appspot.com  

[debug] [2019-04-17T08:47:09.601Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:09.601Z] [rules] updated release projects/explearning-admin/releases/firebase.storage/explearning-admin.appspot.com
[info] ✔  storage: released rules storage.rules to firebase.storage/explearning-admin.appspot.com
[debug] [2019-04-17T08:47:09.603Z] [rules] releasing cloud.firestore with ruleset projects/explearning-admin/rulesets/78c61989-24dc-48f5-ab22-cb8112236bde
[debug] [2019-04-17T08:47:09.603Z] >>> HTTP REQUEST PATCH https://firebaserules.googleapis.com/v1/projects/explearning-admin/releases/cloud.firestore  

[debug] [2019-04-17T08:47:10.812Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:10.813Z] [rules] updated release projects/explearning-admin/releases/cloud.firestore
[info] ✔  firestore: released rules firestore.rules to cloud.firestore
[debug] [2019-04-17T08:47:10.817Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-17T08:47:11.199Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 6 function resizeBlogImages(us-central1)...
[debug] [2019-04-17T08:47:11.207Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/buckets/explearning-admin-blog","eventType":"google.storage.object.finalize","service":"storage.googleapis.com"}}
[info] i  functions: updating Node.js 6 function createAdminUser(us-central1)...
[debug] [2019-04-17T08:47:11.208Z] Trigger is:  {"eventTrigger":{"resource":"projects/explearning-admin","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"}}
[info] i  functions: updating Node.js 6 function publishBlogPost(us-central1)...
[debug] [2019-04-17T08:47:11.210Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function updateGeographicData(us-central1)...
[debug] [2019-04-17T08:47:11.210Z] Trigger is:  {"httpsTrigger":{}}
[debug] [2019-04-17T08:47:11.218Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/resizeBlogImages {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-04-17T08:47:11.222Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/createAdminUser {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-04-17T08:47:11.224Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/publishBlogPost {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-17T08:47:11.225Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/updateGeographicData {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-17T08:47:11.712Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:11.721Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:11.740Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:11.743Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:11.744Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-17T08:47:12.095Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:12.098Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcmVzaXplQmxvZ0ltYWdlcy9Tbmo2aWh2NnBoaw  
 
[debug] [2019-04-17T08:47:12.099Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvY3JlYXRlQWRtaW5Vc2VyL1RJYVZQM1lSaWpn  
 
[debug] [2019-04-17T08:47:12.100Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcHVibGlzaEJsb2dQb3N0L19xR1dsOTUtQ2N3  
 
[debug] [2019-04-17T08:47:12.101Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvdXBkYXRlR2VvZ3JhcGhpY0RhdGEvS3c2b2l0SWxYNzA  
 
[debug] [2019-04-17T08:47:12.361Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:12.365Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:12.367Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:12.393Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:14.364Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcmVzaXplQmxvZ0ltYWdlcy9Tbmo2aWh2NnBoaw  
 
[debug] [2019-04-17T08:47:14.369Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcHVibGlzaEJsb2dQb3N0L19xR1dsOTUtQ2N3  
 
[debug] [2019-04-17T08:47:14.371Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvdXBkYXRlR2VvZ3JhcGhpY0RhdGEvS3c2b2l0SWxYNzA  
 
[debug] [2019-04-17T08:47:14.394Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvY3JlYXRlQWRtaW5Vc2VyL1RJYVZQM1lSaWpn  
 
[debug] [2019-04-17T08:47:14.628Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:14.645Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:14.649Z] <<< HTTP RESPONSE 200
[debug] [2019-04-17T08:47:14.658Z] <<< HTTP RESPONSE 200
