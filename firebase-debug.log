[debug] [2019-04-21T04:02:13.586Z] ----------------------------------------------------------------------
[debug] [2019-04-21T04:02:13.587Z] Command:       /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/node /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/firebase deploy --only functions
[debug] [2019-04-21T04:02:13.588Z] CLI Version:   6.7.0
[debug] [2019-04-21T04:02:13.588Z] Platform:      linux
[debug] [2019-04-21T04:02:13.588Z] Node Version:  v10.14.2
[debug] [2019-04-21T04:02:13.588Z] Time:          Sun Apr 21 2019 12:02:13 GMT+0800 (Hong Kong Standard Time)
[debug] [2019-04-21T04:02:13.588Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-04-21T04:02:13.593Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-04-21T04:02:13.593Z] > authorizing via signed-in user
[debug] [2019-04-21T04:02:13.593Z] [iam] checking project explearning-admin for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2019-04-21T04:02:13.594Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin:testIamPermissions  

[debug] [2019-04-21T04:02:14.624Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'explearning-admin'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2019-04-21T04:02:21.631Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^2.4.3",
    "@types/fs-extra": "^5.0.5",
    "@types/sharp": "^0.22.1",
    "firebase-admin": "~7.0.0",
    "firebase-functions": "^2.2.0",
    "fs-extra": "^7.0.1",
    "moment": "^2.24.0",
    "sharp": "^0.22.0"
  },
  "devDependencies": {
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-04-21T04:02:21.632Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:02:21.633Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:02:22.523Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2019-04-21T04:02:23.418Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:23.420Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin  
 
[debug] [2019-04-21T04:02:24.458Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:24.459Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/4522010229:getServerAppConfig  
 
[debug] [2019-04-21T04:02:25.104Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-04-21T04:02:25.110Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/explearning-admin/configs  
 
[debug] [2019-04-21T04:02:25.361Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (97.34 KB) for uploading
[debug] [2019-04-21T04:02:25.847Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-04-21T04:02:26.258Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:26.260Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-9c81b009-943c-4a8b-8172-4bf2527bada4/3b94b212-a95a-443b-b57d-037c2b03cb68.zip?GoogleAccessId=service-4522010229@gcf-admin-robot.iam.gserviceaccount.com&Expires=1555821146&Signature=wgLERbKuD3Q61WywGFo1F5yH6LDCVyYL3kGuJ0h0YkE3H44mJTf4yssynwceRcf3Rf0DgVSLvL8zKUcnBvmQh4iqR1%2FjuFxFx1DKHhnyTp7swpHHx1JoCnVo8MHzsnfIt0F2Tjkfa9uTCQUrFDjDYj9ps9wybdXnMygyx8M2GX8d6H1Cnfw9MqOQ89%2BXhDWgZplZqUPdOLG5BBR4qQje1mCZSS7j5kWAJ8rLE1d3rn56Onx3QXElElO%2B2aJJVoq9lN9DKDgydsM8TyK1BN4ejaur%2Fbi38kdSrDx2VvtoO52c4m4hE5EIp%2B6zYigNcDbgwEUSn8kFDm7XiZdoens9Nw%3D%3D  

[debug] [2019-04-21T04:02:27.180Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[warn] ⚠  appEngineLocation us-central1
[debug] [2019-04-21T04:02:27.183Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-21T04:02:27.565Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 6 function resizeImages(us-central1)...
[debug] [2019-04-21T04:02:27.567Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function createAdminUser(us-central1)...
[debug] [2019-04-21T04:02:27.567Z] Trigger is:  {"eventTrigger":{"resource":"projects/explearning-admin","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"}}
[info] i  functions: updating Node.js 6 function publishBlogPost(us-central1)...
[debug] [2019-04-21T04:02:27.567Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function updateGeographicData(us-central1)...
[debug] [2019-04-21T04:02:27.567Z] Trigger is:  {"httpsTrigger":{}}
[debug] [2019-04-21T04:02:27.569Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudscheduler.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:02:29.368Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:29.371Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/resizeImages {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:02:29.372Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/createAdminUser {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-04-21T04:02:29.373Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/publishBlogPost {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:02:29.373Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/updateGeographicData {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:02:29.762Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:29.782Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:29.993Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.003Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.006Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-21T04:02:30.396Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.399Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcmVzaXplSW1hZ2VzL0F5czVkWjR6VEpJ  
 
[debug] [2019-04-21T04:02:30.400Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvY3JlYXRlQWRtaW5Vc2VyL2Z6VTA4OWp4cW5N  
 
[debug] [2019-04-21T04:02:30.402Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcHVibGlzaEJsb2dQb3N0L2RXVTBvYmVRTjN3  
 
[debug] [2019-04-21T04:02:30.402Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvdXBkYXRlR2VvZ3JhcGhpY0RhdGEvd1pHdm1SSVlVeG8  
 
[debug] [2019-04-21T04:02:30.662Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.669Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.677Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:30.679Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:32.668Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcmVzaXplSW1hZ2VzL0F5czVkWjR6VEpJ  
 
[debug] [2019-04-21T04:02:32.671Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvdXBkYXRlR2VvZ3JhcGhpY0RhdGEvd1pHdm1SSVlVeG8  
 
[debug] [2019-04-21T04:02:32.677Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvY3JlYXRlQWRtaW5Vc2VyL2Z6VTA4OWp4cW5N  
 
[debug] [2019-04-21T04:02:32.681Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcHVibGlzaEJsb2dQb3N0L2RXVTBvYmVRTjN3  
 
[debug] [2019-04-21T04:02:32.928Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:32.932Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:32.945Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:02:32.947Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:17.133Z] ----------------------------------------------------------------------
[debug] [2019-04-21T04:05:17.135Z] Command:       /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/node /home/gorgantx1/.nvm/versions/node/v10.14.2/bin/firebase deploy --only functions
[debug] [2019-04-21T04:05:17.135Z] CLI Version:   6.7.0
[debug] [2019-04-21T04:05:17.135Z] Platform:      linux
[debug] [2019-04-21T04:05:17.135Z] Node Version:  v10.14.2
[debug] [2019-04-21T04:05:17.135Z] Time:          Sun Apr 21 2019 12:05:17 GMT+0800 (Hong Kong Standard Time)
[debug] [2019-04-21T04:05:17.135Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-04-21T04:05:17.140Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-04-21T04:05:17.140Z] > authorizing via signed-in user
[debug] [2019-04-21T04:05:17.140Z] [iam] checking project explearning-admin for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2019-04-21T04:05:17.141Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin:testIamPermissions  

[debug] [2019-04-21T04:05:18.173Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'explearning-admin'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script.
[debug] [2019-04-21T04:05:24.805Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^2.4.3",
    "@types/fs-extra": "^5.0.5",
    "@types/sharp": "^0.22.1",
    "firebase-admin": "~7.0.0",
    "firebase-functions": "^2.2.0",
    "fs-extra": "^7.0.1",
    "moment": "^2.24.0",
    "sharp": "^0.22.0"
  },
  "devDependencies": {
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-04-21T04:05:24.805Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:05:24.806Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:05:26.558Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:26.783Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2019-04-21T04:05:26.786Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/explearning-admin  
 
[debug] [2019-04-21T04:05:27.832Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:27.834Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/4522010229:getServerAppConfig  
 
[debug] [2019-04-21T04:05:28.486Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-04-21T04:05:28.492Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/explearning-admin/configs  
 
[debug] [2019-04-21T04:05:29.702Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (97.34 KB) for uploading
[debug] [2019-04-21T04:05:30.087Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-04-21T04:05:30.498Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:30.500Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-9c81b009-943c-4a8b-8172-4bf2527bada4/ab789bbd-0bd1-4ac1-875a-d8737a87858a.zip?GoogleAccessId=service-4522010229@gcf-admin-robot.iam.gserviceaccount.com&Expires=1555821330&Signature=2H%2F05WL5Pv4a4lGjx6LYoecADGpyY90ae5xEb1mRWv8X0ppuhlw6XsvAnZf5iCCMllMZbLa1Piw%2BXEDwkUKiu9Jf5aMGcJbSZ7r5umBhWKjEAB7pVaM8dcR78D8wL%2FaQshNZ94navpSh%2FPc92JZ8Bdytbrd2DICIOVWln7xngSscOAnBOetdLet0KYQaeapniwiRGzCBn6T0%2FaVQxp93RWamv9VKMGOozyVhGgjNiJU0O0XoeQ%2FU4doWpzZ7wwBjbErGTkprYZF2ErIVduxO4Q%2BYHWjMdrnXamAoKG5RABOxaB18k4HoLH4Ra4%2BEm8rBsPKjt33JzHI5F%2F8OoInBGQ%3D%3D  

[debug] [2019-04-21T04:05:31.041Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[warn] ⚠  appEngineLocation us-central1
[debug] [2019-04-21T04:05:31.049Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-21T04:05:31.434Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 6 function resizeImages(us-central1)...
[debug] [2019-04-21T04:05:31.439Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function createAdminUser(us-central1)...
[debug] [2019-04-21T04:05:31.439Z] Trigger is:  {"eventTrigger":{"resource":"projects/explearning-admin","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"}}
[info] i  functions: updating Node.js 6 function publishBlogPost(us-central1)...
[debug] [2019-04-21T04:05:31.439Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function updateGeographicData(us-central1)...
[debug] [2019-04-21T04:05:31.440Z] Trigger is:  {"httpsTrigger":{}}
[debug] [2019-04-21T04:05:31.441Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudscheduler.googleapis.com/projectSettings/explearning-admin?view=CONSUMER_VIEW  
 
[debug] [2019-04-21T04:05:33.174Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:33.179Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/resizeImages {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:05:33.181Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/createAdminUser {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-04-21T04:05:33.182Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/publishBlogPost {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:05:33.182Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/us-central1/functions/updateGeographicData {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-04-21T04:05:33.574Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:33.610Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:33.762Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:33.767Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:33.771Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/explearning-admin/locations/-/functions  
 
[debug] [2019-04-21T04:05:34.139Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:34.143Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcmVzaXplSW1hZ2VzL1lZMjhHdGtzOHJJ  
 
[debug] [2019-04-21T04:05:34.144Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvY3JlYXRlQWRtaW5Vc2VyL2w3RTNTaU03UExv  
 
[debug] [2019-04-21T04:05:34.145Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvcHVibGlzaEJsb2dQb3N0L1FCa3RzNU54cnpV  
 
[debug] [2019-04-21T04:05:34.146Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/ZXhwbGVhcm5pbmctYWRtaW4vdXMtY2VudHJhbDEvdXBkYXRlR2VvZ3JhcGhpY0RhdGEvQmhCNnV5c042X2M  
 
[debug] [2019-04-21T04:05:34.419Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:34.422Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:34.429Z] <<< HTTP RESPONSE 200
[debug] [2019-04-21T04:05:34.431Z] <<< HTTP RESPONSE 200
